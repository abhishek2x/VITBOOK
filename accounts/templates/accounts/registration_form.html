{% extends 'base.html' %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/base.css' %}">

<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
<!-- Bootstrap core CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
<!-- Material Design Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.12.0/css/mdb.min.css" rel="stylesheet">
<!-- Custom stylesheet -->
<link rel="stylesheet" href="{% static 'css/signin.css' %}">
<br>

<br>
<div class="text-center container-fluid">
	<form class="form-signin" enctype="multipart/form-data" method="POST">
		<h2 class="displayy text-center">[̲̅V][̲̅i][̲̅t][̲̅b][̲̅o][̲̅o][̲̅k]</h2>
		<br>
		{% csrf_token %}

		<div class="input-group mb-3">
			<div class="input-group-append">
				<span class="input-group-text"><i class="fas fa-user"></i></span>
			</div>
			{{ form.username }}
		</div>
		<div class="input-group mb-2">
			<div class="input-group-append">
				<span class="input-group-text"><i class="fas fa-envelope-square"></i></span>
			</div>
			{{ form.email }}
		</div>
		<div class="input-group mb-2">
			<div class="input-group-append">
				<span class="input-group-text"><i class="fas fa-key"></i></span>
			</div>
			{{ form.password1 }}
		</div>
		<div class="input-group mb-2">
			<div class="input-group-append">
				<span class="input-group-text"><i class="fas fa-key"></i></span>
			</div>
			{{ form.password2 }}
		</div>

		<!-- <div class="d-flex justify-content-center mt-3 login_container">
				 <input class="btn login_btn" type="submit" value="Register Account">
				 </div> -->

		<p class="text-break font-small safe text-muted">You can only access Vitbook using the email eddress provided by
			<b>VIT</b>
		</p>


		{{ form.errors }}

		<button class="hide">
			<input type="submit">
			<a class="btn btn-primary btn-md active" id="check" role="button" aria-pressed="true">Sign up</a>
			</input>
		</button>

		<p class="text-break font-small safe text-muted">By Signing up, you agree to our <b>Terms</b> and <b>Privacy
				Policy.</b></p>

		<hr>
		<div class="text-center">
			<div class="text-left">
				<p class="font-weight-light">Already have an account?</p>
				<input type="hidden"><a href="/accounts/login/" class="btn btn-primary active" role="button"
					aria-pressed="true">Sign in</a></input>
			</div>
		</div>

	</form>
</div>

<script>
	function validate(e) {
		const email = document.querySelector('#id_email');
		if (email.value.endsWith("vitbhopal.ac.in")) {
			email.style.border = "solid green 2px";
			email.style.boxShadow = "4px solid";
			document.getElementById("check").style.visibility = "visible";
			console.log("Right");
		} else {
			email.style.border = "solid red 2px";
			email.style.boxShadow = "2px";
			document.getElementById("check").style.visibility = "hidden";
			console.log("Please enter email address provided by VIT")
		};
	}

	const email1 = document.querySelector('#id_email');
	
	document.getElementsByName('email')[0].placeholder = 'Enter VIT email id.';
	document.getElementsByName('username')[0].placeholder = 'Username';
	document.getElementsByName('password1')[0].placeholder = 'Password';
	document.getElementsByName('password2')[0].placeholder = 'Confirm password';
	
	email1.addEventListener('change', validate);
	email1.addEventListener('click', validate);
	
	// Adding CSS Class to all input elements
	
	const name_field = document.querySelector('#id_username');
	const pass1_field = document.querySelector('#id_password1');
	const pass2_field = document.querySelector('#id_password2');

	name_field.classList.add("form-control");
	email1.classList.add("form-control");
	pass1_field.classList.add("form-control");
	pass2_field.classList.add("form-control");

</script>

{% endblock %}